<h1 style="text-align: center;"><em>Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO</em></h1>
<p style="text-align: justify;">Os sistemas embarcados est&atilde;o cada vez mais presentes no nosso dia-a-dia. Basta olhar ao seu redor: h&aacute; sistemas embarcados presentes em televisores, monitores, smartwatches, celulares, setup boxes, ve&iacute;culos, ilumina&ccedil;&atilde;o inteligente, etc. Enfim, os sistemas embarcados dominam, mesmo que silenciosamente, a maneira como a tecnologia evolui. Uma das tarefas dos sistemas embarcados &eacute; o controle de atuadores, dos quais um dos mais comuns s&atilde;o motores DC (cuja velocidade pode ser controlada com precis&atilde;o pela grande maioria dos microcontroladores dispon&iacute;veis no mercado).</p>
<h1 style="text-align: center;"><a id="user-content-material-necess&aacute;rio" class="anchor" href="https://github.com/LarianeGo/Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO/blob/master/README.md#material-necess%C3%A1rio" aria-hidden="true"></a><em>Material necess&aacute;rio</em></h1>
<h2>Para reproduzir o projeto voc&ecirc; precisar&aacute; de:</h2>
<ul>
<li>Um Arduino UNO (com cabo USB para programa&ccedil;&atilde;o)</li>
<li>Um Driver Motor Ponte H L298n</li>
<li>Um Motor DC 3-6V com Caixa de Redu&ccedil;&atilde;o e Eixo Duplo</li>
<li>Uma Fonte DC Chaveada 9V 1A Plug P4</li>
<li>Jumpers (macho-f&ecirc;mea e macho-macho)</li>
</ul>
<h1 style="text-align: center;"><a id="user-content-rela&ccedil;&atilde;o-entre-velocidade-de-motor-dc-e-pwm" class="anchor" href="https://github.com/LarianeGo/Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO/blob/master/README.md#rela%C3%A7%C3%A3o-entre-velocidade-de-motor-dc-e-pwm" aria-hidden="true"></a><em>Rela&ccedil;&atilde;o entre velocidade de motor DC e PWM</em></h1>
<p style="text-align: justify;">No caso dos motores DC, a &ldquo;velocidade de giro&rdquo; (RPM) pode ser controlada variando-se sua tens&atilde;o de alimenta&ccedil;&atilde;o. Al&eacute;m disso, o RPM &eacute; diretamente proporcional &agrave; tens&atilde;o aplicada. Portanto, variando-se a tens&atilde;o m&eacute;dia de alimenta&ccedil;&atilde;o do motor, varia-se o RPM do mesmo.</p>
<p style="text-align: justify;">Em resumo: o sinal de PWM, devidamente amplificado, pode ser usado para controlar o RPM de um motor DC!</p>
<p style="text-align: justify;">Isso significa que:</p>
<p style="text-align: justify;">Duty cycle de 0%: tens&atilde;o m&eacute;dia igual a 0V, logo o motor fica parado</p>
<p style="text-align: justify;">Duty cycle de 50%: tens&atilde;o m&eacute;dia igual a 50% da tens&atilde;o de alimenta&ccedil;&atilde;o do motor, logo este girar&aacute; com RPM igual a metade de sua rota&ccedil;&atilde;o m&aacute;xima</p>
<p style="text-align: justify;">Duty cycle de 100%: tens&atilde;o m&eacute;dia igual a tens&atilde;o de alimenta&ccedil;&atilde;o do motor, logo este girar&aacute; com RPM igual a sua rota&ccedil;&atilde;o m&aacute;xima.</p>
<p style="text-align: justify;">Neste caso, como amplificador para acionar o motor DC, ir&aacute; ser usado um driver de motor (com ponte H) feito com o circuito integrado L298N. Trata-se de um driver muito vers&aacute;til e muito utilizado para acionamento de motores DC de 3 &ndash; 6V.</p>
<h1 style="text-align: center;"><a id="user-content-pwm-no-arduino" class="anchor" href="https://github.com/LarianeGo/Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO/blob/master/README.md#pwm-no-arduino" aria-hidden="true"></a><em>PWM no Arduino</em></h1>
<p style="text-align: justify;">A programa&ccedil;&atilde;o do Arduino (incluindo o Arduino UNO, utilizado neste post) j&aacute; possui uma fun&ccedil;&atilde;o nativa para gerar um sinal PWM em alguns dos pinos (aqueles identificados com um s&iacute;mbolo/identifica&ccedil;&atilde;o ~). Isso torna muito mais f&aacute;cil o desenvolvimento dos projetos que envolvem PWM, permitindo f&aacute;cil utiliza&ccedil;&atilde;o do mesmo com pouqu&iacute;ssimo custo em termos computacionais (uso de mem&oacute;ria Flash, RAM e processamento) e escrita de c&oacute;digos-fonte mais limpos e curtos. Tal fun&ccedil;&atilde;o &eacute; chamada de analogWrite(), e recebe dois par&acirc;metros, conforme abaixo:</p>
<p style="text-align: justify;">analogWrite(PINO, VALOR_ANALOGICO);</p>
<p style="text-align: justify;">Onde:</p>
<p style="text-align: justify;">PINO: n&uacute;mero do pino do Arduino o qual se deseja que o sinal PWM seja gerado. Conforme dito anteriormente, somente pinos com s&iacute;mbolo/identifica&ccedil;&atilde;o ~ podem gerar sinais PWM.</p>
<p style="text-align: justify;">VALOR_ANALOGICO: valor (de 0 a 255), proporcional ao Duty Cycle a ser gerado. Ou seja, para Duty Cycle de 100%, deve-se utilizar valor 255, j&aacute; para Duty Cycle 20% deve-se utilizar o valor 51 e assim por diante.</p>
<h1 style="text-align: center;"><a id="user-content-circuito-esquem&aacute;tico" class="anchor" href="https://github.com/LarianeGo/Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO/blob/master/README.md#circuito-esquem%C3%A1tico" aria-hidden="true"></a><em><strong>Circuito esquem&aacute;tico</strong></em></h1>
<p style="text-align: justify;"><strong>ATEN&Ccedil;&Atilde;O</strong>:<br /><strong>1) N&Atilde;O</strong>&nbsp;utilize a alimenta&ccedil;&atilde;o pela USB de programa&ccedil;&atilde;o. Voc&ecirc;, obrigatoriamente, deve utilizar a Fonte DC Chaveada 9V/1A. Caso contr&aacute;rio, voc&ecirc; corre s&eacute;rios riscos de danificar o dispositivo que est&aacute; alimentando o Arduino pela USB de programa&ccedil;&atilde;o (computador, por exemplo).<br /><strong>2)</strong>&nbsp;<strong>N&Atilde;O SE ESQUE&Ccedil;A</strong>&nbsp;de colocar um jumper em ATIVA MA .</p>
<p>&nbsp;</p>
<p><a href="https://camo.githubusercontent.com/bdbbe2993b4768f510f0ea3385818552974768d8/68747470733a2f2f75706c6f6164732e66696c697065666c6f702e636f6d2f323031382f31322f506f6e74655f485f4c3239386e33312e6a7067" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/bdbbe2993b4768f510f0ea3385818552974768d8/68747470733a2f2f75706c6f6164732e66696c697065666c6f702e636f6d2f323031382f31322f506f6e74655f485f4c3239386e33312e6a7067" alt="Figura 4 - Driver (com ponte H) L298N" width="550" height="550" data-canonical-src="https://uploads.filipeflop.com/2018/12/Ponte_H_L298n31.jpg" /></a></p>
<h2 style="text-align: center;"><a id="user-content-o-motor-deve-ser-ligado-como-o-esquema-abaixo" class="anchor" href="https://github.com/LarianeGo/Controle-de-velocidade-de-motor-DC-com-PWM-no-Arduino-UNO/blob/master/README.md#o-motor-deve-ser-ligado-como-o-esquema-abaixo" aria-hidden="true"></a><em>O motor deve ser ligado como o esquema abaixo.</em></h2>
<p><a href="https://camo.githubusercontent.com/20ec1bcf34968f2fbc46681775995a6c2b3fad9d/68747470733a2f2f75706c6f6164732e66696c697065666c6f702e636f6d2f323031382f31322f6d6f746f725f70776d5f61726475696e6f5f756e6f5f4a5045472e6a7067" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/20ec1bcf34968f2fbc46681775995a6c2b3fad9d/68747470733a2f2f75706c6f6164732e66696c697065666c6f702e636f6d2f323031382f31322f6d6f746f725f70776d5f61726475696e6f5f756e6f5f4a5045472e6a7067" alt="Figura 5 - circuito esquem&aacute;tico" width="599" height="399" data-canonical-src="https://uploads.filipeflop.com/2018/12/motor_pwm_arduino_uno_JPEG.jpg" /></a></p>
